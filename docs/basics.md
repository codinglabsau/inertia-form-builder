<script setup>
import { Text } from '@codinglabsau/ui';
import { FormBuilder, useSchema, Grid, Section } from '../src/index';

const simpleSchema = useSchema({
  firstname: Text,
  surname: {
    component: Text,
    label: 'Last name',
  },
});

const propForwardingSchema = useSchema({
  firstname: {
    component: Text,
    props: {
     id: 'custom-id',
    },
  },
});

const sectionSchema = useSchema({
  physical_attributes: {
    component: Section,
    heading: 'Physical Attributes',
    schema: {
      attributes: {
        component: Grid,
        schema: {
          height: {
            component: Text,
          },
          weight: {
            component: Text,
          },
        },
      },
    },
  },
  contact_details: {
    component: Section,
    heading: 'Contact Details',
    schema: {
      email: {
        component: Text,
      },
      phone: {
        component: Text,
      },
    },
  },
})
</script>

# The Basics

Import input components that utilise v-model, or use a UI component library to build a form schema.

```vue
<script setup>
  import { Text } from '@codinglabsau/ui'
  import { FormBuilder, useSchema } from '@codinglabsau/inertia-form-builder'

  const simpleSchema = useSchema({
    firstname: Text,
    surname: {
      component: Text,
      label: 'Last name',
    },
  })

  const submit = (schema) => console.log(schema.form)
</script>

<template>
  <form @submit.prevent="submit">
    <FormBuilder :schema="simpleSchema" />
  </form>
</template>
```

<FormBuilder :schema="simpleSchema" />

### Preview

As you can see, the object key determines the input name.

<pre class="border bg-gray-200 p-4">{{ simpleSchema.form.data() }}</pre>

## Labels
By default, labels are automatically generated by humanising the element name. For example, `default_category_id` would display as `Default Category`.

Labels can be overridden using the `label` prop, or hidden using `showLabel: false`.

## Props

By default, any props specified in the `props` section are forwarded to the form element.

```vue
<script setup>
  import { Text } from '@codinglabsau/ui'
  import { FormBuilder, useSchema } from '@codinglabsau/inertia-form-builder'

  const propForwardingSchema = useSchema({
    firstname: {
      component: Text,
      props: {
        id: 'custom-id',
      },
    },
  })
</script>

<template>
  <form @submit.prevent="submit">
    <FormBuilder :schema="propForwardingSchema" />
  </form>
</template>
```

<form @submit.prevent="submit">
  <FormBuilder :schema="propForwardingSchema" />
</form>

::: tip
The ID attribute of each element is generated automatically, based on a form-wide prefix combined with the element name. We do not recommend overridding the ID prop to ensure each input has a unique ID on the page, including when multiple forms are present.
:::

## Reactivity
When passing a schema as a plain object, the form will not be reactive to changes in props. To make the form reactive, pass it as a function instead:

```js
const schema = useSchema(() => ({
  firstname: Text,
}))
```

## Using Section

Sections can be used to help break up long forms.

```vue

<script setup>
  import { Text } from '@codinglabsau/ui'
  import { FormBuilder, useSchema, Section, Grid } from '@codinglabsau/inertia-form-builder'

  const sectionSchema = useSchema({
    physical_attributes: {
      component: Section,
      heading: 'Physical Attributes',
      schema: {
        attributes: {
          component: Grid,
          schema: {
            height: {
              component: Text,
            },
            weight: {
              component: Text,
            },
          },
        },
      },
    },
    contact_details: {
      component: Section,
      heading: 'Contact Details',
      schema: {
        email: {
          component: Text,
        },
        phone: {
          component: Text,
        },
      },
    },
  })
</script>

<template>
  <form @submit.prevent="submit">
    <FormBuilder :schema="sectionSchema" />
  </form>
</template>
```

<FormBuilder :schema="sectionSchema" />
